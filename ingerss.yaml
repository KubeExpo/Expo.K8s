apiVersion: extensions/v1beta1
kind : Ingress
metadata: 
  name: ingress-gcloud
  annotations: 
    # kubernetes.io/ingress.class: "nginx"
    kubernetes.io/ingress.class: "gce"
spec:
  backend:
    serviceName: app-gcloud-service
    servicePort: 80
  rules:
    - http:
        paths:
          - path: /
            backend: 
              serviceName: app-gcloud-service
              servicePort: 80
          - path: /gcloud/*
            backend: 
              serviceName: app-gcloud-service
              servicePort: 80
          # - path: /graphql
          #   backend:
          #     serviceName: app-graphql-service
          #     servicePort: 80
---

  



# apiVersion: apps/v1
# kind: Deployment
# metadata:
#   name: nginx-ingress-controller
# spec:
#   replicas: 1
#   selector:
#     matchLabels:
#       app: nginx-ingress
#       name: nginx-ingress
#   template:
#     metadata:
#       labels:
#         app: nginx-ingress
#         name: nginx-ingress
#     spec:
#       containers:
#       - name: nginx-ingress-controller
#         image: quay.io/kubernetes-ingress-controller/nginx-ingress-controller:0.26.1
#         # resources:
#         #   limits:
#         #     memory: "128Mi"
#         #     cpu: "500m"
#         args:
#           - /nginx-ingress-controller
#           - --configmap=$(POD_NAMESPACE)/nginx-configuration
#         env:
#           - name: POD_NAME
#             valueFrom:
#                 fieldRef:
#                   fieldPath: metadata.name
#           - name: POD_NAMESPACE
#             valueFrom:
#                 fieldRef:
#                   fieldPath: metadata.namespace
#         ports:
#         - name: http
#           containerPort: 80
#         - name: https
#           containerPort: 443
# ---
# apiVersion: v1
# kind: ConfigMap
# metadata:
#   name: myconfigmap
#   labels:
#     app: myapplication
# data:
#   my-key: my-value
# ---
# apiVersion: v1
# kind: Service
# metadata:
#   name: nginx-ingress
# spec:
#   type: NodePort
#   selector:
#     app: nginx-ingress
#   ports:
#   - name: http
#     port: 80
#     targetPort: 80
#     protocol: TCP
#   - name:  https
#     port: 443
#     targetPort: 80
#       protocol: TCP
# ---
# apiVersion: v1
# kind: ServiceAccount
# metadata:
#   name:  nginx-ingress-serviceaccount
# ---
# apiVersion:  networking.k8s.io/v1beta1
# kind: Ingress
# metadata:
#   name: app-gcloud-ingress
# spec:
#   backend:
#     serviceName: app-gcloud-service
#     servicePort: 80
# ---
